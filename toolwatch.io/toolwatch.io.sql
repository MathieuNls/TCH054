CREATE TABLE USERS(
 ID NUMBER GENERATED BY DEFAULT ON NULL IDENTITY,
 Nom VARCHAR(20) NOT NULL,
 Prenom VARCHAR(20) NOT NULL,
 DateEnregistrement TIMESTAMP DEFAULT sysdate NOT NULL,
 DateDernierLogin TIMESTAMP NOT NULL,
 PRIMARY KEY ID
);

CREATE TABLE MARQUE(
  ID NUMBER GENERATED BY DEFAULT ON NULL IDENTITY,
  Nom VARCHAR(30) NOT NULL,
  PRIMARY KEY ID
);

CREATE TABLE MONTRE(
  ID NUMBER GENERATED BY DEFAULT ON NULL IDENTITY,
  Nom VARCHAR(30) NOT NULL,
  FK_Marque NUMBER NOT NULL,
  PRIMARY KEY ID,
  FOREIGN KEY FK_Marque REFERENCES MARQUE(ID) ON DELETE CASCADE
);

CREATE TABLE MONTRES_USERS(
  FK_USER NUMBER NOT NULL,
  FK_MONTRE NUMBER NOT NULL,
  PRIMARY KEY (FK_USER, FK_MONTRE),
  FOREIGN KEY FK_USER REFERENCES USER(ID) ON DELETE CASCADE
  FOREIGN KEY FK_MONTRE REFERENCES MONTRE(ID) ON DELETE CASCADE
);

CREATE TABLE MESURES(
  ID NUMBER GENERATED BY DEFAULT ON NULL IDENTITY,
  FK_USER NUMBER,
  FK_MONTRE NUMBER NOT NULL,
  DateMesure TIMESTAMP,
  Derive TIME,
  PRIMARY KEY ID,
  FOREIGN KEY FK_USER REFERENCES USER(ID) ON DELETE SET NULL,
  FOREIGN KEY FK_MONTRE REFERENCES MONTRE(ID) ON DELETE CASCADE
);
